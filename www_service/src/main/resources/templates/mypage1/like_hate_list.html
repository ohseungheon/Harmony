<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <style>
    #by-section {
        width: 1000px;
        height: auto;
        border: 1px solid #ddd;
        margin: 80px auto;
        
        display: flex; /* Flexbox ì‚¬ìš© */
        flex-direction: column; /* ì„¸ë¡œ ë°°ì¹˜ */
        justify-content: center; /* ìˆ˜í‰ ê°€ìš´ë° ì •ë ¬ */
        align-items: center; /* ìˆ˜ì§ ê°€ìš´ë° ì •ë ¬ */
    }
    .by-list{
    	border: 1px solid #ddd;
    	width: 750px;
    	height: 450px;
    	margin-top: 30px;
    	margin-bottom: 80px;
    	position: relative;
    }
    .by-list-span{
    	margin-top: 50px;
    	margin-bottom: -20px;
    }
    #by-list-1{
     margin-bottom: 40px;
     display: flex; /* Flexbox ì‚¬ìš© */
     flex-direction: column; /* ì„¸ë¡œ ë°°ì¹˜ */
     justify-content: center; /* ìˆ˜í‰ ê°€ìš´ë° ì •ë ¬ */
     align-items: center; /* ìˆ˜ì§ ê°€ìš´ë° ì •ë ¬ */
     position: relative;
    }
    #by-recipe_recom{
    	border: 1px solid #ddd;
    	width: 600px;
    	height: 100px;
    	margin: 20px;
    	
    	display: flex; /* Flexbox ì‚¬ìš© */
        justify-content: space-between; /* ë‚´ìš©ë¬¼ ì‚¬ì´ì˜ ê³µê°„ì„ ê· ë“±í•˜ê²Œ ë°°ë¶„ */
        align-items: center; /* ìˆ˜ì§ ê°€ìš´ë° ì •ë ¬ */
    }
    #by-recipe_recom:hover {
    	background-color: #eee;
    }
    #by-span-name{
    	margin-left: 50px;
    	font-size: 20px;
    }
    .by-delete-btn {
    	margin-right: 50px;
    	width: 80px;
    	height: 40px;
    	background-color: #F5A47E;
        border: none; /* í…Œë‘ë¦¬ ì—†ì• ê¸° */
        border-radius: 5px;
        color: white;
        cursor: pointer;
    }
    .by-delete-btn:hover {
    	background-color: #e5946e; /* ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ ìƒ‰ìƒ ë³€ê²½ */ 
    }
    #by-favorite_menu{
    	display: flex; /* Flexbox ì‚¬ìš© */
    	flex-wrap: wrap; /* ìš”ì†Œê°€ ê°€ë¡œë¡œ ë‚˜ì—´ë˜ê³  ì¤„ ë°”ê¿ˆ */
     	flex-direction: row;
     	justify-content: center; /* ìˆ˜í‰ ê°€ìš´ë° ì •ë ¬ */
    }
    #by-favo-menu{
    	border: 1px solid #ddd;
		width: 150px;
    	height: 150px;
    	margin: 35px;
    }
   	#by-menu-img{
   		border: 1px solid #ddd;
		width: 150px;
    	height: 100px;
   	}
   	#by-menu {
   		font-size: 20px; /* í°íŠ¸ ì‚¬ì´ì¦ˆ ì¡°ì ˆ */
   		margin: 10px;
   		display: flex; /* Flexbox ì‚¬ìš© */
   		justify-content: center; /* ìˆ˜í‰ ê°€ìš´ë° ì •ë ¬ */
   	}
    </style>
</head>
<body>
<header>
<th:block th:insert="~{/sub/header.html}"></th:block>
</header>
<section id="by-section">
    <span class="by-list-span">ğŸ’›ë ˆì‹œí”¼ ì¢‹ì•„ìš” ë¦¬ìŠ¤íŠ¸</span>
    <div class="by-list" id="by-list-1">
    	<!-- ë ˆì‹œí”¼ ì¶”ì²œí•œ ë¦¬ìŠ¤íŠ¸ ì¶œë ¥(ë°˜ë³µë¬¸ ì‚¬ìš©í•´ì•¼í•¨) -->
    	<div th:each="recipeLike : ${recipeLike}" id="by-recipe_recom">
    		<a th:href="@{/menu_all/recipe_detail(rcode=${recipeLike.rcode})}">
			<span id="by-span-name" th:text="${recipeLike.recipeName} +' ğŸ‘'">[[${recipeLike.recipeName}]]</span>
    		</a>
			<input type="hidden" class="mno" th:value="${recipeLike.mno}">
			<input type="hidden" class="rrcode" th:value="${recipeLike.rrcode}">
			<button class="by-delete-btn"> ì‹«ì–´ìš” ğŸ‘</button>
		</div>
    </div>
    
    <span class="by-list-span">ğŸ’—ë©”ë‰´ ì¢‹ì•„ìš” ë¦¬ìŠ¤íŠ¸</span>
    <div class="by-list">
    	<div id="by-favorite_menu">
    	<!-- ë©”ë‰´ ì¢‹ì•„ìš”í•œ ë¦¬ìŠ¤íŠ¸ ì¶œë ¥ -->
    		<div th:each="menuLike : ${menuLike}" id="by-favo-menu">
    			<img id="by-menu-img" th:src="@{'/uploads/' + ${menuLike.imgUrl}}">
    			<span id="by-menu" th:text="${menuLike.menuName}">[[${menuLike.menuName}]]</span>
    		</div>
    	</div>	
    </div>
</section>

<footer>
	<th:block th:insert="~{/sub/footer.html}"></th:block>
</footer>

<script>

$(document).on("click", ".by-delete-btn", function(e) {
	e.preventDefault(); // ê¸°ë³¸ ë²„íŠ¼ ë™ì‘ ë°©ì§€
    const rrcode = $(this).siblings(".rrcode").val();
    console.log(rrcode);
    
	$.ajax({
		url: '/api/recipe-reco/'+rrcode,
		type: "DELETE",
		success: function(response){
			alert(response);
			console.log("ì‚­ì œì„±ê³µ");
			location.reload(); // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
		},
		error: function(xhr, textStatus, errorThrown){
			console.log("ì‚­ì œì‹¤íŒ¨", textStatus, errorThrown);
		}
	});
});
</script>
</body>
</html>