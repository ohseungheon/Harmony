<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ë‚ ì”¨ ê¸°ë°˜ ë©”ë‰´ ì¶”ì²œ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .weather-container {
            padding: 20px;
            margin-top: 20px;
            border-radius: 8px;
            text-align: center;
        }
        .weather-item {
            font-size: 16px;  
        }
        .weather-icon {
            font-size: 20px;
            margin: 0 5px; 
            vertical-align: middle; 
        }
        .menu-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        .menu-item {
            width: 200px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .menu-item:nth-child(1) { background-color: #ffb3ba; }
        .menu-item:nth-child(2) { background-color: #baffc9; }
        .menu-item:nth-child(3) { background-color: #bae1ff; }
        .menu-item:nth-child(4) { background-color: #ffffba; }
        .menu-item img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        .menu-info {
            padding: 15px;
            text-align: center;
        }
        .menu-name {
            font-weight: bold;
            margin-bottom: 10px;
        }
        .menu-button {
            background-color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<section>
    <div id="weather-container" class="weather-container">
    </div>
    <h1>í˜„ì¬ ë‚ ì”¨ì— ì´ëŸ° ë©”ë‰´ ì–´ë•Œìš”?</h1>
    <div id="menu-list" class="menu-list">
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const apiKey = '5ec2a8343328554022efe9f92a7fdfa3';
        const cityName = 'Busan';
        const url = `http://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=${apiKey}`;

        const weatherMapping = {
            'clear sky': 'ë§‘ìŒ',
            'few clouds': 'ë§‘ìŒ',
            'scattered clouds': 'ë§‘ìŒ',
            'broken clouds': 'íë¦¼',
            'overcast clouds': 'íë¦¼',
            'light rain': 'ë¹„',
            'moderate rain': 'ë¹„',
            'heavy intensity rain': 'ë¹„',
            'shower rain': 'ë¹„',
            'rain': 'ë¹„',
            'thunderstorm': 'ë¹„',
            'snow': 'ëˆˆ',
            'mist': 'ì•ˆê°œ',
            'fog': 'ì•ˆê°œ',
            'haze': 'ì•ˆê°œ',
            'smoke': 'ì•ˆê°œ',
            'dust': 'ì•ˆê°œ',
            'sand': 'ì•ˆê°œ',
            'ash': 'ì•ˆê°œ',
            'squalls': 'ë¹„',
            'tornado': 'ë¹„'
        };

        const weatherIcons = {
            'ë§‘ìŒ': 'â˜€ï¸',
            'íë¦¼': 'â˜ï¸',
            'ë¹„': 'ğŸŒ§ï¸',
            'ëˆˆ': 'â„ï¸',
            'ì•ˆê°œ': 'ğŸŒ«ï¸'
        };

        const menuImages = {
            'ë¼ë©˜': 'ramen.jpg',
            'ì˜¤ë…': 'ì˜¤ë…ì‚¬ì§„.png',
            'ì§¬ë½•': 'jjamppong.png',
            'ë”¤ì„¬': 'dim_sum.png',
            'ëˆë¶€ë¦¬': 'donburi.jpg',
            'ì†Œë°”': 'soba.jpg',
            'ìŠ¤í…Œì´í¬': 'steak.png',
            'ì‚¼ê³„íƒ•': 'samgyetang.png',
            'í•˜ì´ë¼ì´ìŠ¤': 'hayashi_rice.png',
            'ì™€í”Œ': 'waffles.png',
            'ë™íƒœì°Œê°œ': 'dongtae_jjigae.png',
            'í˜¸ë°•ì£½': 'hobak_juk.png'
        };

        fetch(url)
            .then(response => response.json())
            .then(data => {
                const weatherContainer = document.getElementById('weather-container');
                const date = new Date(data.dt * 1000);
                const formattedDate = date.toISOString().split('T')[0];
                const temp = (data.main.temp - 273.15).toFixed(2);
                const description = data.weather[0].description;
                const simplifiedDescription = weatherMapping[description] || 'ë§‘ìŒ';
                const icon = weatherIcons[simplifiedDescription] || 'â˜€ï¸';

                const content = `
                    <div class="weather-item">
                        ${temp}Â°C <span class="weather-icon">${icon}</span> ${simplifiedDescription}
                    </div>
                `;

                weatherContainer.innerHTML = content;

                // ì˜¨ë„ì— ë”°ë¥¸ ë©”ë‰´ ì¶”ì²œ
                let recommendedMenus;
                if (temp < 26) {
                    recommendedMenus = ['ë¼ë©˜', 'ì˜¤ë…', 'ì§¬ë½•', 'ë”¤ì„¬'];
                } else if (temp >= 26 && temp < 27) {
                    recommendedMenus = ['ëˆë¶€ë¦¬', 'ì†Œë°”', 'ìŠ¤í…Œì´í¬', 'ì‚¼ê³„íƒ•'];
                } else {
                    recommendedMenus = ['í•˜ì´ë¼ì´ìŠ¤', 'ì™€í”Œ', 'ë™íƒœì°Œê°œ', 'í˜¸ë°•ì£½'];
                }

                const menuList = document.getElementById('menu-list');
                menuList.innerHTML = recommendedMenus.map(menu => `
                    <div class="menu-item">
                        <img src="/uploads/${menuImages[menu] || 'default.jpg'}" alt="${menu}">
                        <div class="menu-info">
                            <div class="menu-name">${menu}</div>
                        </div>
                    </div>
                `).join('');
            })
            .catch(error => console.error('Error fetching weather data:', error));
    });

    
</script>
</body>
</html>